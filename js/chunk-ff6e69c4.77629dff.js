(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ff6e69c4"],{"2f55":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("h3",{staticClass:"mt-4 text-center"},[t._v("Add new patient")]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-6 offset-lg-3"},[n("patient-form-component")],1)])]),n("div",{staticClass:"col-12 mt-3"},[n("h3",{staticClass:"text-center"},[t._v("Patients List")]),n("patient-list-component")],1)])},r=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{ref:"patientForm",on:{submit:function(e){return e.preventDefault(),t.submitForm(e)}}},[n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"infected-date"}},[t._v("শনাক্তের তারিখ")]),n("div",{staticClass:"col-sm-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.infectedDate,expression:"form.infectedDate"}],staticClass:"form-control",attrs:{type:"date",id:"infected-date",required:"",disabled:t.isSaving},domProps:{value:t.form.infectedDate},on:{input:function(e){e.target.composing||t.$set(t.form,"infectedDate",e.target.value)}}})])]),n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"name"}},[t._v("নাম")]),n("div",{staticClass:"col-sm-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control",attrs:{type:"text",id:"name",required:"",disabled:t.isSaving,placeholder:"রোগীর নাম লিখুন"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}})])]),n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"occupation-id"}},[t._v("পেশা")]),n("div",{staticClass:"col-sm-9"},[null!=t.occupations?n("select",{directives:[{name:"model",rawName:"v-model",value:t.form.occupationId,expression:"form.occupationId"}],staticClass:"form-control",attrs:{id:"occupation-id",required:"",disabled:t.isSaving},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"occupationId",e.target.multiple?n:n[0])}}},[n("option",{attrs:{disabled:""},domProps:{value:null}},[t._v("পেশা নির্বাচন করুন")]),t._l(t.occupations,(function(e,a){return n("option",{key:a,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2):t._e()])]),n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"union-id"}},[t._v("ইউনিয়ন")]),n("div",{staticClass:"col-sm-9"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.form.unionId,expression:"form.unionId"}],staticClass:"form-control",attrs:{id:"union-id",required:"",disabled:t.isSaving},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"unionId",e.target.multiple?n:n[0])}}},[n("option",{attrs:{disabled:""},domProps:{value:null}},[t._v("ইউনিয়ন নির্বাচন করুন")]),t._l(t.unions,(function(e,a){return n("option",{key:a,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2)])]),n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"address"}},[t._v("ঠিকানা")]),n("div",{staticClass:"col-sm-9"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.address,expression:"form.address"}],staticClass:"form-control",attrs:{id:"address",required:"",disabled:t.isSaving,placeholder:"রোগীর ঠিকানা লিখুন"},domProps:{value:t.form.address},on:{input:function(e){e.target.composing||t.$set(t.form,"address",e.target.value)}}})])]),n("div",{staticClass:"form-group row"},[n("div",{staticClass:"col-sm-9 offset-sm-3"},[n("button",{staticClass:"btn btn-success btn-block",attrs:{type:"submit",disabled:t.isSaving}},[t.isSaving?n("div",{staticClass:"spinner-border spinner-border-sm mb-2",attrs:{role:"status"}},[n("span",{staticClass:"sr-only"},[t._v("Saving")])]):t._e(),t._v(" Save ")])])])])},o=[],s=(n("96cf"),n("1da1")),c=n("5530"),l=n("d940"),d=n("2f62"),u={name:"PatientFormComponent",computed:Object(c["a"])({},Object(d["d"])(["unions","occupations"])),data:function(){return{form:{infectedDate:null,name:null,occupationId:null,unionId:null,address:null},isSaving:!1}},methods:Object(c["a"])(Object(c["a"])({},Object(d["b"])(["bindUnions","bindOccupations"])),{},{initData:function(){null===this.unions&&this.bindUnions(),null===this.occupations&&this.bindOccupations()},resetForm:function(){this.form={infectedDate:null,name:null,occupationId:null,unionId:null,address:null}},submitForm:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isSaving=!0,n=Object(c["a"])({},t.form),e.prev=2,a=l["c"].collection("patients").doc(),n["id"]=a.id,n["infectedDate"]=l["a"].fromDate(new Date(t.form.infectedDate)),n["createdAt"]=l["a"].now(),n["updatedAt"]=l["a"].now(),e.next=10,a.set(n);case 10:t.resetForm(),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](2),alert("Failed to save patient. Try again later.");case 16:t.isSaving=!1;case 17:case"end":return e.stop()}}),e,null,[[2,13]])})))()}}),mounted:function(){this.initData()}},m=u,p=n("2877"),f=Object(p["a"])(m,i,o,!1,null,"021b2266",null),v=f.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"table table-hover"},[t._m(0),n("tbody",[null===t.patients?n("tr",[n("td",{attrs:{colspan:"7"}},[n("preloader-component")],1)]):0===t.patients.length?n("tr",[n("td",{staticClass:"text-center",attrs:{colspan:"7"}},[t._v(" No patient is available ")])]):t._l(t.patients,(function(e,a){return n("patient-item-component",{key:a,attrs:{index:a,patient:e,unions:t.unions,occupations:t.occupations}})}))],2)])},g=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",{attrs:{scope:"col"}},[t._v("#")]),n("th",{attrs:{scope:"col"}},[t._v("শনাক্তের তারিখ")]),n("th",{attrs:{scope:"col"}},[t._v("নাম")]),n("th",{attrs:{scope:"col"}},[t._v("পেশা")]),n("th",{attrs:{scope:"col"}},[t._v("ইউনিয়ন")]),n("th",{attrs:{scope:"col"}},[t._v("ঠিকানা")]),n("th",{attrs:{scope:"col"}},[t._v("Action")])])])}],_=n("953d"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("th",{attrs:{scope:"row"}},[t._v(t._s(t.index+1))]),n("td",[t.isEdit?n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.infectedDate,expression:"form.infectedDate"}],staticClass:"form-control form-control-sm",attrs:{type:"date",disabled:t.isUpdating},domProps:{value:t.form.infectedDate},on:{input:function(e){e.target.composing||t.$set(t.form,"infectedDate",e.target.value)}}}):n("span",[t._v(t._s(t.patient.infectedDate.toDate().toLocaleDateString("bn-BD",{year:"numeric",month:"long",day:"numeric"})))])]),n("td",[t.isEdit?n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control form-control-sm",attrs:{type:"text",disabled:t.isUpdating},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}}):n("span",[t._v(t._s(t.patient.name))])]),n("td",[t.isEdit?n("select",{directives:[{name:"model",rawName:"v-model",value:t.form.occupationId,expression:"form.occupationId"}],staticClass:"form-control form-control-sm",attrs:{disabled:t.isUpdating},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"occupationId",e.target.multiple?n:n[0])}}},[n("option",{attrs:{disabled:""},domProps:{value:null}},[t._v("Select Occupation")]),t._l(t.occupations,(function(e,a){return n("option",{key:a,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2):n("span",[t._v(t._s(t.getterSpecificOccupationById(t.patient.occupationId).name))])]),n("td",[t.isEdit?n("select",{directives:[{name:"model",rawName:"v-model",value:t.form.unionId,expression:"form.unionId"}],staticClass:"form-control form-control-sm",attrs:{disabled:t.isUpdating},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"unionId",e.target.multiple?n:n[0])}}},[n("option",{attrs:{disabled:""},domProps:{value:null}},[t._v("Select Union")]),t._l(t.unions,(function(e,a){return n("option",{key:a,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2):n("span",[t._v(t._s(t.getterSpecificUnionById(t.patient.unionId).name))])]),n("td",[t.isEdit?n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.address,expression:"form.address"}],staticClass:"form-control form-control-sm",attrs:{disabled:t.isUpdating},domProps:{value:t.form.address},on:{input:function(e){e.target.composing||t.$set(t.form,"address",e.target.value)}}}):n("span",[t._v(t._s(t.patient.address))])]),n("td",[t.isEdit?t._e():n("button",{staticClass:"btn btn-sm btn-info mr-2",attrs:{disabled:t.isDeleting},on:{click:function(e){t.isEdit=!0}}},[t._v(" Edit ")]),t.isEdit?t._e():n("button",{staticClass:"btn btn-sm btn-danger",attrs:{disabled:t.isDeleting},on:{click:t.deletePatient}},[t.isDeleting?n("div",{staticClass:"spinner-border spinner-border-sm mb-2",attrs:{role:"status"}},[n("span",{staticClass:"sr-only"},[t._v("Deleting")])]):t._e(),t._v(" Delete ")]),t.isEdit?n("button",{staticClass:"btn btn-sm btn-success mr-2",attrs:{disabled:t.isUpdating},on:{click:t.updatePatient}},[t.isUpdating?n("div",{staticClass:"spinner-border spinner-border-sm mb-2",attrs:{role:"status"}},[n("span",{staticClass:"sr-only"},[t._v("Updating")])]):t._e(),t._v(" Update ")]):t._e(),t.isEdit?n("button",{staticClass:"btn btn-sm btn-info",attrs:{disabled:t.isUpdating},on:{click:function(e){t.isEdit=!1}}},[t._v(" Cancel ")]):t._e()])])},C=[],I=(n("b0c0"),n("a9e3"),{name:"PatientItemComponent",props:{patient:{type:Object,required:!0},index:{type:Number,required:!0},unions:{},occupations:{}},watch:{patient:{handler:function(t){this.form.infectedDate=t.infectedDate.toDate().toISOString().substr(0,10),this.form.name=t.name,this.form.occupationId=t.occupationId,this.form.unionId=t.unionId,this.form.address=t.address},immediate:!0,deep:!0}},computed:Object(c["a"])({},Object(d["c"])(["getterSpecificOccupationById","getterSpecificUnionById"])),data:function(){return{isEdit:!1,form:{infectedDate:"",name:"",occupationId:"",unionId:"",address:""},isUpdating:!1,isDeleting:!1}},methods:{updatePatient:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.form.name){e.next=3;break}return alert("Name can not be empty"),e.abrupt("return");case 3:if(t.form.occupationId){e.next=6;break}return alert("Occupation can not be empty"),e.abrupt("return");case 6:if(t.form.unionId){e.next=9;break}return alert("Union can not be empty"),e.abrupt("return");case 9:if(t.form.address){e.next=12;break}return alert("Address can not be empty"),e.abrupt("return");case 12:if(t.form.infectedDate){e.next=15;break}return alert("Infected date can not be empty"),e.abrupt("return");case 15:return t.isUpdating=!0,e.prev=16,n=l["c"].collection("patients").doc(t.patient.id),e.next=20,n.update({name:t.form.name,occupationId:t.form.occupationId,unionId:t.form.unionId,address:t.form.address,infectedDate:l["a"].fromDate(new Date(t.form.infectedDate)),updatedAt:l["a"].now()});case 20:t.isEdit=!1,e.next=26;break;case 23:e.prev=23,e.t0=e["catch"](16),console.log(e.t0);case 26:t.isUpdating=!1;case 27:case"end":return e.stop()}}),e,null,[[16,23]])})))()},deletePatient:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(confirm("Are you sure want to delete?")){e.next=2;break}return e.abrupt("return");case 2:return t.isDeleting=!0,e.prev=3,n=l["c"].collection("patients").doc(t.patient.id),e.next=7,n.delete();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](3),alert("Failed to delete. Try again later");case 12:t.isDeleting=!1;case 13:case"end":return e.stop()}}),e,null,[[3,9]])})))()}}}),y=I,x=Object(p["a"])(y,h,C,!1,null,"ca6814c6",null),w=x.exports,D={name:"PatientListComponent",components:{PatientItemComponent:w,PreloaderComponent:_["a"]},computed:Object(c["a"])({},Object(d["d"])(["unions","occupations","patients"])),methods:Object(c["a"])(Object(c["a"])({},Object(d["b"])(["bindOccupations","bindUnions","bindPatients"])),{},{initData:function(){null===this.unions&&this.bindUnions(),null===this.occupations&&this.bindOccupations(),null===this.patients&&this.bindPatients()}}),mounted:function(){this.initData()}},E=D,O=Object(p["a"])(E,b,g,!1,null,"08469bc8",null),N=O.exports,P={name:"Patients",components:{PatientListComponent:N,PatientFormComponent:v}},S=P,k=Object(p["a"])(S,a,r,!1,null,"0f6dcfc6",null);e["default"]=k.exports},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var a=n("1d80"),r=n("5899"),i="["+r+"]",o=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),c=function(t){return function(e){var n=String(a(e));return 1&t&&(n=n.replace(o,"")),2&t&&(n=n.replace(s,"")),n}};t.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(t,e,n){var a=n("861d"),r=n("d2bb");t.exports=function(t,e,n){var i,o;return r&&"function"==typeof(i=e.constructor)&&i!==n&&a(o=i.prototype)&&o!==n.prototype&&r(t,o),t}},"953d":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex justify-content-center"},[n("div",{staticClass:"spinner-border",attrs:{role:"status"}},[n("span",{staticClass:"sr-only"},[t._v("Loading...")])])])}],i={name:"PreloaderComponent"},o=i,s=n("2877"),c=Object(s["a"])(o,a,r,!1,null,"74a8d882",null);e["a"]=c.exports},a9e3:function(t,e,n){"use strict";var a=n("83ab"),r=n("da84"),i=n("94ca"),o=n("6eeb"),s=n("5135"),c=n("c6b6"),l=n("7156"),d=n("c04e"),u=n("d039"),m=n("7c73"),p=n("241c").f,f=n("06cf").f,v=n("9bf2").f,b=n("58a8").trim,g="Number",_=r[g],h=_.prototype,C=c(m(h))==g,I=function(t){var e,n,a,r,i,o,s,c,l=d(t,!1);if("string"==typeof l&&l.length>2)if(l=b(l),e=l.charCodeAt(0),43===e||45===e){if(n=l.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+l}for(i=l.slice(2),o=i.length,s=0;s<o;s++)if(c=i.charCodeAt(s),c<48||c>r)return NaN;return parseInt(i,a)}return+l};if(i(g,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var y,x=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof x&&(C?u((function(){h.valueOf.call(n)})):c(n)!=g)?l(new _(I(e)),n,x):I(e)},w=a?p(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),D=0;w.length>D;D++)s(_,y=w[D])&&!s(x,y)&&v(x,y,f(_,y));x.prototype=h,h.constructor=x,o(r,g,x)}},b0c0:function(t,e,n){var a=n("83ab"),r=n("9bf2").f,i=Function.prototype,o=i.toString,s=/^\s*function ([^ (]*)/,c="name";a&&!(c in i)&&r(i,c,{configurable:!0,get:function(){try{return o.call(this).match(s)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-ff6e69c4.77629dff.js.map