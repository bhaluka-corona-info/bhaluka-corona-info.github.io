(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1709d80e"],{5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var a=n("1d80"),r=n("5899"),s="["+r+"]",i=RegExp("^"+s+s+"*"),o=RegExp(s+s+"*$"),c=function(t){return function(e){var n=String(a(e));return 1&t&&(n=n.replace(i,"")),2&t&&(n=n.replace(o,"")),n}};t.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(t,e,n){var a=n("861d"),r=n("d2bb");t.exports=function(t,e,n){var s,i;return r&&"function"==typeof(s=e.constructor)&&s!==n&&a(i=s.prototype)&&i!==n.prototype&&r(t,i),t}},9321:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("h3",{staticClass:"mt-4 text-center"},[t._v("Add new occupation")]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-6 offset-lg-3"},[n("occupation-form-component")],1)])]),n("div",{staticClass:"col-12 mt-3"},[n("h3",{staticClass:"text-center"},[t._v("Occupation List")]),n("occupation-list-component")],1)])},r=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{on:{submit:function(e){return e.preventDefault(),t.submitForm(e)}}},[n("div",{staticClass:"form-group row"},[n("label",{staticClass:"col-sm-3 col-form-label",attrs:{for:"name"}},[t._v("নাম")]),n("div",{staticClass:"col-sm-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",id:"name",placeholder:"পেশার নাম লিখুন",required:"",disabled:t.isSaving},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])]),n("div",{staticClass:"form-group row"},[n("div",{staticClass:"col-sm-9 offset-sm-3"},[n("button",{staticClass:"btn btn-success btn-block",attrs:{type:"submit",disabled:t.isSaving}},[t.isSaving?n("div",{staticClass:"spinner-border spinner-border-sm mb-2",attrs:{role:"status"}},[n("span",{staticClass:"sr-only"},[t._v("Saving")])]):t._e(),t._v(" Save ")])])])])},i=[],o=(n("b0c0"),n("96cf"),n("1da1")),c=n("d940"),u={name:"OccupationFormComponent",data:function(){return{name:null,isSaving:!1}},methods:{submitForm:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isSaving=!0,e.prev=1,n=c["c"].collection("occupations").doc(),e.next=5,n.set({id:n.id,name:t.name,createdAt:c["a"].now(),updatedAt:c["a"].now()});case 5:t.name="",e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),alert("Failed to add occupation. Try again later");case 11:t.isSaving=!1;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))()}}},l=u,p=n("2877"),d=Object(p["a"])(l,s,i,!1,null,"1dc3fe14",null),m=d.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"table"},[t._m(0),n("tbody",[null===t.occupations?n("tr",[n("td",{attrs:{colspan:"3"}},[n("preloader-component")],1)]):0===t.occupations.length?n("tr",[n("td",{staticClass:"text-center",attrs:{colspan:"3"}},[t._v(" No union is available ")])]):t._l(t.occupations,(function(t,e){return n("occupation-item-component",{key:e,attrs:{index:e,occupation:t}})}))],2)])},b=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",{attrs:{scope:"col"}},[t._v("#")]),n("th",{attrs:{scope:"col"}},[t._v("নাম")]),n("th",{attrs:{scope:"col"}},[t._v("Action")])])])}],v=n("5530"),g=n("2f62"),h=n("953d"),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("th",{attrs:{scope:"row"}},[t._v(t._s(t.index+1))]),n("td",[t.isEdit?n("form",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],ref:"inputField",staticClass:"form-control",attrs:{type:"text",placeholder:"Enter occupation name",required:"",disabled:t.isUpdating},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t.errorMessage?n("small",{staticClass:"form-text text-danger",domProps:{textContent:t._s(t.errorMessage)}}):t._e()]):n("span",[t._v(t._s(t.occupation.name))])]),n("td",[t.isEdit?t._e():n("button",{staticClass:"btn btn-sm btn-info mr-2",on:{click:function(e){t.isEdit=!0}}},[t._v(" Edit ")]),t.isEdit?t._e():n("button",{staticClass:"btn btn-sm btn-danger",attrs:{disabled:t.isDeleting},on:{click:t.deleteUnion}},[t.isDeleting?n("div",{staticClass:"spinner-border spinner-border-sm mb-2",attrs:{role:"status"}},[n("span",{staticClass:"sr-only"},[t._v("Loading")])]):t._e(),t._v(" Delete ")]),t.isEdit?n("button",{staticClass:"btn btn-sm btn-success mr-2",attrs:{type:"button",disabled:t.isUpdating},on:{click:t.updateUnion}},[t.isUpdating?n("div",{staticClass:"spinner-border spinner-border-sm mb-2",attrs:{role:"status"}},[n("span",{staticClass:"sr-only"},[t._v("Loading")])]):t._e(),t._v(" Update ")]):t._e(),t.isEdit?n("button",{staticClass:"btn btn-sm btn-info",attrs:{disabled:t.isUpdating},on:{click:function(e){!t.isUpdating&&(t.isEdit=!1)}}},[t._v(" Cancel ")]):t._e()])])},C=[],x=(n("4160"),n("a9e3"),n("159b"),{name:"OccupationItemComponent",props:{occupation:{type:Object,required:!0},index:{type:Number,required:!0}},watch:{occupation:{handler:function(t){var e=t.name;this.name=e},immediate:!0,deep:!0}},data:function(){return{name:"",isEdit:!1,errorMessage:null,isUpdating:!1,isDeleting:!1}},methods:{updateUnion:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isUpdating&&!t.isDeleting){e.next=2;break}return e.abrupt("return");case 2:if(t.errorMessage=null,0!==t.name.length){e.next=7;break}return t.errorMessage="Name should not empty",t.$refs.inputField.focus(),e.abrupt("return");case 7:return t.isUpdating=!0,e.prev=8,n=c["c"].collection("occupations").doc(t.occupation.id),e.next=12,n.update({name:t.name,updatedAt:c["a"].now()});case 12:t.isEdit=!1,e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](8),alert("Failed to update. Try again later");case 18:t.isUpdating=!1;case 19:case"end":return e.stop()}}),e,null,[[8,15]])})))()},deleteUnion:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isUpdating&&!t.isDeleting){e.next=2;break}return e.abrupt("return");case 2:if(confirm("Are you sure want to delete? This will also delete patients of this occupation.")){e.next=4;break}return e.abrupt("return");case 4:return t.isDeleting=!0,e.prev=5,e.next=8,c["c"].collection("patients").where("occupationId","==",t.occupation.id).get();case 8:return n=e.sent,n.forEach(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.ref.delete();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),a=c["c"].collection("occupations").doc(t.occupation.id),e.next=13,a.delete();case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](5),console.log("Failed to delete. Try again later");case 18:t.isDeleting=!1;case 19:case"end":return e.stop()}}),e,null,[[5,15]])})))()}}}),w=x,E=Object(p["a"])(w,_,C,!1,null,"06a582c7",null),O=E.exports,y={name:"OccupationListComponent",components:{OccupationItemComponent:O,PreloaderComponent:h["a"]},computed:Object(v["a"])({},Object(g["d"])(["occupations"])),methods:Object(v["a"])(Object(v["a"])({},Object(g["b"])(["bindOccupations"])),{},{initOccupation:function(){null===this.occupations&&this.bindOccupations()}}),mounted:function(){this.initOccupation()}},N=y,k=Object(p["a"])(N,f,b,!1,null,"41c671e1",null),I=k.exports,A={name:"Occupations",components:{OccupationListComponent:I,OccupationFormComponent:m}},U=A,j=Object(p["a"])(U,a,r,!1,null,"7eb40929",null);e["default"]=j.exports},"953d":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex justify-content-center"},[n("div",{staticClass:"spinner-border",attrs:{role:"status"}},[n("span",{staticClass:"sr-only"},[t._v("Loading...")])])])}],s={name:"PreloaderComponent"},i=s,o=n("2877"),c=Object(o["a"])(i,a,r,!1,null,"74a8d882",null);e["a"]=c.exports},a9e3:function(t,e,n){"use strict";var a=n("83ab"),r=n("da84"),s=n("94ca"),i=n("6eeb"),o=n("5135"),c=n("c6b6"),u=n("7156"),l=n("c04e"),p=n("d039"),d=n("7c73"),m=n("241c").f,f=n("06cf").f,b=n("9bf2").f,v=n("58a8").trim,g="Number",h=r[g],_=h.prototype,C=c(d(_))==g,x=function(t){var e,n,a,r,s,i,o,c,u=l(t,!1);if("string"==typeof u&&u.length>2)if(u=v(u),e=u.charCodeAt(0),43===e||45===e){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+u}for(s=u.slice(2),i=s.length,o=0;o<i;o++)if(c=s.charCodeAt(o),c<48||c>r)return NaN;return parseInt(s,a)}return+u};if(s(g,!h(" 0o1")||!h("0b1")||h("+0x1"))){for(var w,E=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof E&&(C?p((function(){_.valueOf.call(n)})):c(n)!=g)?u(new h(x(e)),n,E):x(e)},O=a?m(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),y=0;O.length>y;y++)o(h,w=O[y])&&!o(E,w)&&b(E,w,f(h,w));E.prototype=_,_.constructor=E,i(r,g,E)}},b0c0:function(t,e,n){var a=n("83ab"),r=n("9bf2").f,s=Function.prototype,i=s.toString,o=/^\s*function ([^ (]*)/,c="name";a&&!(c in s)&&r(s,c,{configurable:!0,get:function(){try{return i.call(this).match(o)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-1709d80e.b50669ec.js.map